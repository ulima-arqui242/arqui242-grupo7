# 4.1. Disponibilidad

Sample content for section 4.1.

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                           | **Fuente del Estímulo** | **Artefacto**                  | **Entorno**                         | **Respuesta**                                                | **Medida de Respuesta**                             |
|------------------|-------------------------|----------------------------------------|-------------------------|--------------------------------|-------------------------------------|-------------------------------------------------------------|-----------------------------------------------------|
| ESC-01           | Disponibilidad           | Base de datos ya no deja ingresar nueva data   | Saturación de almacenamiento de la base de datos| Módulo de Procesamiento de Pagos | Operación en horario laboral con alta demanda                | Suspender el funcionamiento de la aplicación y no aceptar nuevas transacciones  | Plazo de 30 minutos para mejorar el plan de capacidad de la base de datos |
| ESC-02           | Disponibilidad           | Comunicación interrumpida con la base de datos | Actualización en la versión de base de datos provoca que no se ejecuten las consultas  | Base de datos | Llamadas GET al backend | La base de datos ya no presenta interrupciones en la comunicación | La base de datos no presenta interrupciones el 99.9% de las veces |

### Táctica Elegida
La plataforma debe llegar a un escenario donde 99.9% de las veces no se registró interrupciones del sistema. Por ende la táctica elegida es Redundancia Pasiva. A continuación se documenta los detalles:

### Documentación de la Decisión (ADR)

**Título**:  
Elección entre Redundancia Pasiva vs Degradación para el manejo de saturación de almacenamiento en la base de datos.

**Contexto**:  
Durante las horas pico, el módulo de procesamiento de pagos tiene una alta demanda. Una sobresaturación del almacenamiento de la base de datos impediría la creación de nuevas transacciones, lo que tendría un impacto directo en las micro y pequeñas empresas que dependen del sistema para sus funciones diarias.

**Alternativas**:
1. **Redundancia Pasiva**  
Una base de datos de respaldo a la principal, actualizada regularmente y lista para su uso en caso de que el almacenamiento de la base principal esté saturado. La base de respaldo puede activarse cuando la principal falla y luego esta se actualiza periódicamente.

   - Ventajas: Las operaciones continúan en el corto plazo sin afectar demasiado el sistema.
   - Desventajas: No es inmediato, puede llevar unos minutos activar a la otra base.

2. **Degradación**  
Priorizar las tareas críticas y dejar de realizar correctamente las no tan importantes. En este caso, el sistema limita las operaciones que no son críticas para que el sistema pueda lanzar recursos en la base da datos mientras se halla una forma de cómo mejorar la capacidad.

   - Ventajas: Mantener activa las transacciones críticas con funcionalidad reducida en las demás características del sistema.
   - Desventajas: No es eficiente dentro del alcance máximo.

**Criterios de Elección**:  
- Impacto del tiempo de inactividad
- Costos operativos y de infraestructura
- Requerimientos de disponibilidad
- Tiempos de conmutación y recuperación

**Decisión**:  
- Se elige la **Redundancia Pasiva**.

**Sustento**:  
Dado que el tiempo de respuesta es crítico para el negocio, la redundancia pasiva es una solución confiable con un costo razonable. Por otro lado, el costo es más alto para la redundancia activa, mientras que la activación de un servidor de respaldo permite una rápida reanudación, lo cual es crucial para las horas pico en que se necesita la operatividad.

-----------------------------------------------------------------------------------------------------------------------------

### Táctica Elegida
La plataforma debe llegar a un escenario donde el 99.9% de las veces no se registren interrupciones de comunicación con la base de datos. Por ende, la táctica elegida es Rollback. A continuación, se documentan los detalles:

### Documentación de la Decisión (ADR)

**Título**:  
Elección entre Rollback vs Reintentos para la actualización de base de datos.

**Contexto**:  
El sistema es responsable del procesamiento de datos y se enfrenta a una interrupción de la disponibilidad en caso de un fallo en la ejecución de las consultas después de la actualización de la base de datos. Si las consultas no se ejecutan correctamente tras estas actualizaciones, se podrían generar interrupciones en el sistema, afectando así la experiencia del usuario.

**Alternativas**:
1. **Rollback**  
Volver a una versión anterior estable de la base de datos en caso de fallo durante una actualización.
   - Ventajas: Permite restaurar el sistema rápidamente a un estado funcional sin afectaciones importantes.
   - Desventajas: Requiere mantener registros de versiones estables o checkpoints, lo que puede implicar más almacenamiento.

2. **Reintentos**  
Reintentar ejecutar las consultas tras un breve intervalo, asumiendo que el fallo de comunicación es temporal.
   - Ventajas: Es simple y de bajo costo. Se basa en suponer que los errores de comunicación pueden ser intermitentes.
   - Desventajas: Si el error persiste, los reintentos no darán solución al problema y la operación será interrumpida por un periodo más largo.

**Criterios de Elección**:  
- Impacto del tiempo de inactividad
- Costos operativos y de infraestructura
- Requerimientos de disponibilidad
- Tiempos de conmutación y recuperación

**Decisión**:  
- Se elige la **Rollback**.

**Sustento**:  
Debido a la naturaleza crítica de la base de datos y la necesidad de mantener la disponibilidad, el rollback permite que el sistema vuelva a una versión funcional lo más rápido posible. A pesar de que esta táctica implica almacenamiento adicional, reduce el riesgo de fallas prolongadas y ofrece un mayor control del sistema.

## Módulo de Contacto y Seguimiento de Servicio
| Código de Escenario | Estímulo | Fuente del Estímulo | Artefacto | Entorno | Respuesta | Medida de Respuesta |
|---------------------|----------|---------------------|-----------|---------|-----------|---------------------|
| ESC-01              | Base de datos ya no acepta nuevas consultas o actualizaciones de estado | Saturación de almacenamiento de la base de datos | Módulo de Contacto y Seguimiento de Servicio | Operación en horario de alta demanda (picos de uso) | Suspender la capacidad de registrar nuevas interacciones o actualizaciones de estado, pero permitir la visualización de servicios ya contratados | Plazo de 30 minutos para aumentar la capacidad de almacenamiento de la base de datos |




[4 Tácticas](../4.md)

[Regresar al índice](../../README.md)
